{{define "content"}}
<h1>{{.Title}}</h1>
{{ if .Errors }} {{ range .Errors }}
<p class="error">{{.}}</p>
{{ end }} {{ end }}
<hr />
<h3>Apps</h3>
<a href="/admin/app/null">Create new app</a>
<table>
  <thead>
    <tr>
      <th>Id</th>
      <th>Name</th>
      <th>Created at</th>
      <th>Updated at</th>
      <th>Edit</th>
    </tr>
  </thead>
  <tbody>
    {{ range .Apps }}
    <tr>
      <td>{{ .ID }}</td>
      <td>{{ .Name }}</td>
      <td>{{ .CreatedAt }}</td>
      <td>{{ .UpdatedAt }}</td>
      <td><a href="/admin/app/{{.ID}}">Edit</a></td>
    </tr>
    {{ end }}
  </tbody>
</table>

<h3>Keys</h3>
<table>
  <thead>
    <tr>
      <th>Id</th>
      <th>Key preview</th>
      <th>Created at</th>
      <th>Updated at</th>
      <th>Gives access to</th>
      <th>Edit</th>
    </tr>
  </thead>
  <tbody>
    {{ range .Keys }}
    <tr>
      <td>{{ .ID }}</td>
      <td>{{ .KeyPreview }}</td>
      <td>{{ .CreatedAt }}</td>
      <td>{{ .UpdatedAt }}</td>
      <td>
        {{ range .Access }}
        <p>{{ (index $.AppsByID .AppID).Name }}</p>
        {{ end }}
      </td>
      <td><a href="/admin/key/{{.ID}}">Edit</a></td>
    </tr>
    {{ end }}
  </tbody>
</table>

{{end}}
